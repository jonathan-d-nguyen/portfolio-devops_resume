{
  "name": "Development Environment",
  "customizations": {
    "vscode": {
      "settings": {
        // Base settings that apply to all environments
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "editor.minimap.enabled": false,

        // These conditions are evaluated based on context variables
        "editor.lineNumbers": "${if:${localEnv:CODESPACES_BROWSER}=mobile|on|relative}",
        "window.zoomLevel": "${if:${localEnv:CODESPACES_BROWSER}=mobile|1.5|0}",
        "vim.enabled": "${if:${localEnv:CODESPACES_BROWSER}=mobile|false|true}",
        "editor.fontSize": "${if:${localEnv:CODESPACES_BROWSER}=mobile|16|14}"
      },
      "extensions": {
        // Core extensions for all environments
        "recommendations": [
          "esbenp.prettier-vscode",
          "GitHub.copilot",
          "GitHub.copilot-chat"
        ],
        // Conditional extensions
        "unwantedRecommendations": [
          "${if:${localEnv:CODESPACES_BROWSER}=mobile|vscodevim.vim|}",
          "${if:${localEnv:CODESPACES_BROWSER}=mobile|wakatime.vscode-wakatime|}"
        ]
      }
    }
  },
  "postCreateCommand": "bash scripts/setup-vscode-env.sh",
  "remoteEnv": {
    // This can be set by your GitHub Codespaces preferences
    // or detected through User-Agent in the postCreateCommand
    "CODESPACES_BROWSER": "${localEnv:CODESPACES_BROWSER}"
  }
}
